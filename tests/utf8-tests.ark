(import "tests-tools.ark")

(let utf8-tests (fun () {
    (mut tests 0)
    (let start-time (time))

    (let Ã© 1)
    (set tests (assert-eq Ã© 1 "create identifier Ã©" tests))

    (let Ã¢Ã¨ 2)
    (set tests (assert-eq Ã¢Ã¨ 2 "create identifier Ã¢Ã¨" tests))

    (let ğŸ¥³ 12)
    (set tests (assert-eq ğŸ¥³ 12 "create identifier ğŸ¥³" tests))

    (let emotes [
        "ğŸ¥³"
        "ğŸ˜…"
        "ğŸ˜¥"
        "ğŸ‘¿"
    ])
    (mut i 0)
    (while (< i (len emotes)) {
        (set tests (assert-eq (len (@ emotes i)) 4 "checking emotes length" tests))
        (set i (+ 1 i))
    })

    (set tests (assert-eq "\U1f47f" "\u1f47f" "checking conversion pattern \\u and \\U" tests))
    (set tests (assert-eq "\u1f47f" "ğŸ‘¿" "checking conversion pattern \\u and its emote" tests))

    (recap "UTF8 tests passed" tests (- (time) start-time))

    tests
}))

(let passed-utf8 (utf8-tests))